<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>MorfoLogic - Plataforma Montessori</title>
    <link rel="icon" type="image/png" href="./assets//img/favicon.png" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Manifest PWA -->
    <link rel="manifest" href="./manifest.json" />
    <!-- Theme color para mobile -->
    <meta name="theme-color" content="#386ccc" />
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="./assets/icon-180.png" />

    <!-- Scripts -->
    <script src="./js/gameConfig.js" defer></script>
    <script src="./js/components.js" defer></script>
    <script src="./js/main.js" defer></script>
    <script src="./js/audio.js" defer></script>
    <script src="./js/auth.js" defer></script>
    <script src="./js/drag-drop-util.js" defer></script>
    <script src="./js/memory.js" defer></script>
    <script src="./js/genius.js" defer></script>
    <script src="./js/ligar.js" defer></script>
  </head>
  <body
    class="bg-stone-100 text-stone-800 flex items-center justify-center min-h-screen"
  >
    <
    <div id="app" class="w-full max-w-5xl mx-auto p-4 grid">
      <div
        id="login-screen"
        class="text-center bg-white p-10 rounded-2xl shadow-2xl fade-in max-w-md w-full mx-auto my-auto"
      >
        <h1
          class="text-3xl md:text-4xl pt-10 font-extrabold mb-1 text-[#386ccc]"
        >
          Morfo<span id="logic" class="text-[#FF2C2C]">Logic</span>
        </h1>
        <br />
        <p class="text-stone-500 mb-8 text-sm">
          Aprenda gram√°tica com o m√©todo Montessori
        </p>
        <form id="login-form" class="space-y-4">
          <input
            type="text"
            id="username"
            placeholder="Digite seu usu√°rio"
            class="w-full px-4 py-3 border border-stone-300 rounded-lg focus:ring-2 focus:ring-[#4a81e3] focus:outline-none transition"
            required
          />
          <input
            type="password"
            id="password"
            placeholder="Digite sua senha"
            class="w-full px-4 py-3 border border-stone-300 rounded-lg focus:ring-2 focus:ring-[#4a81e3] focus:outline-none transition"
            required
          />
          <button
            id="login-button"
            type="submit"
            class="w-full bg-[#386ccc] text-white font-bold py-3 px-4 rounded-lg hover:bg-[#2a529f] transition-transform hover:scale-105"
          >
            Entrar
          </button>
        </form>
        <p id="login-error" class="text-red-500 mt-4 h-5 text-sm"></p>
      </div>

      <div
        id="static-screen"
        class="hidden text-center bg-white p-8 rounded-2xl shadow-lg"
      >
        <h1 class="page-title text-3xl md:text-4xl font-bold mb-4">
          Bem-vindo(a)!
        </h1>
        <p class="text-stone-500 mb-6">
          Esta √© uma √°rea reservada para administra√ß√£o.
        </p>
        <svg
          class="mx-auto w-32 h-32 md:w-48 md:h-48 text-[#386ccc]"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
          />
        </svg>
        <button
          onclick="goBackToLogin()"
          class="mt-8 bg-stone-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-stone-600 transition"
        >
          Voltar
        </button>
      </div>

      <div id="game-selection-screen" class="hidden">
        <header class="flex justify-between items-center mb-12 gap-6">
          <div class="space-y-4">
            <h1 class="page-title text-xl md:text-3xl font-extrabold">
              Selecione um Mini-Jogo
            </h1>
            <p class="mobile-indented-text text-stone-600 text-base md:text-lg">
              Sua pontua√ß√£o geral √©:
              <span id="general-score" class="font-bold text-[#2a529f]">0</span>
            </p>
          </div>
          <p
            id="session-timer-show"
            class="bg-white text-amber-500 font-bold py-3 px-5 rounded-lg hover:bg-amber-50 transition shadow-sm"
          >
            Tempo de Sess√£o:
            <span id="session-timer-display" class="text-amber-500">--:--</span>
          </p>
          <button
            onclick="goBackToLogin()"
            class="bg-stone-200 text-stone-600 font-bold py-3 px-5 rounded-lg hover:bg-stone-300 transition shadow-sm"
          >
            Sair
          </button>
        </header>

        <!-- Seletor de Jogos -->
        <div class="mb-8 max-w-md mx-auto">
          <label
            for="game-filter"
            class="block text-stone-600 font-semibold mb-2"
          >
          </label>
          <select
            id="game-filter"
            class="w-full px-4 py-3 border border-stone-300 rounded-lg focus:ring-2 focus:ring-[#4a81e3] focus:outline-none transition bg-white cursor-pointer"
          >
            <option value="all">Todos os Jogos</option>
            <option value="favorites">‚≠ê Favoritos</option>
            <option value="memory">üß† Mem√≥ria</option>
            <option value="genius">‚ú® Genius</option>
            <option value="ligar">üîó Tempo</option>
          </select>
        </div>

        <div id="games-container" class="grid md:grid-cols-3 gap-6 text-center">
          <div
            data-game="memory"
            onclick="openPhaseSelectionModal('memory')"
            class="bg-white p-6 rounded-2xl shadow-lg cursor-pointer hover:shadow-xl hover:-translate-y-1 transition-all relative"
          >
            <button
              class="favorite-star absolute top-4 left-4 text-3xl transition-transform hover:scale-125 z-10"
              data-game-id="memory"
              onclick="event.stopPropagation(); toggleFavorite('memory')"
            >
              ‚òÜ
            </button>
            <h2 class="text-2xl font-bold mb-2 text-stone-700">Mem√≥ria</h2>
            <p class="text-stone-500 mb-4">
              Encontre os pares de s√≠mbolos e classes.
            </p>
            <div class="text-6xl text-amber-500 mb-4">üß†</div>
            <button
              class="w-full bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition pointer-events-none"
            >
              Jogar
            </button>
          </div>
          <div
            data-game="genius"
            onclick="openPhaseSelectionModal('genius')"
            class="bg-white p-6 rounded-2xl shadow-lg cursor-pointer hover:shadow-xl hover:-translate-y-1 transition-all relative"
          >
            <button
              class="favorite-star absolute top-4 left-4 text-3xl transition-transform hover:scale-125 z-10"
              data-game-id="genius"
              onclick="event.stopPropagation(); toggleFavorite('genius')"
            >
              ‚òÜ
            </button>
            <h2 class="text-2xl font-bold mb-2 text-stone-700">Genius</h2>
            <p class="text-stone-500 mb-4">
              Memorize e repita a sequ√™ncia de s√≠mbolos.
            </p>
            <div class="text-6xl text-sky-500 mb-4">‚ú®</div>
            <button
              class="w-full bg-sky-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-sky-600 transition pointer-events-none"
            >
              Jogar
            </button>
          </div>
          <div
            data-game="ligar"
            onclick="openPhaseSelectionModal('ligar')"
            class="bg-white p-6 rounded-2xl shadow-lg cursor-pointer hover:shadow-xl hover:-translate-y-1 transition-all relative"
          >
            <button
              class="favorite-star absolute top-4 left-4 text-3xl transition-transform hover:scale-125 z-10"
              data-game-id="ligar"
              onclick="event.stopPropagation(); toggleFavorite('ligar')"
            >
              ‚òÜ
            </button>
            <h2 class="text-2xl font-bold mb-2 text-stone-700">Tempo</h2>
            <p class="text-stone-500 mb-4">
              Una os pares no menor tempo poss√≠vel.
            </p>
            <div class="text-6xl text-rose-500 mb-4">üîó</div>
            <button
              class="w-full bg-rose-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-rose-600 transition pointer-events-none"
            >
              Jogar
            </button>
          </div>
        </div>
      </div>

      <div id="game-screen" class="hidden"></div>
    </div>

    <div
      id="phase-selection-modal"
      class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"
    >
      <div
        class="bg-white p-6 md:p-8 rounded-2xl shadow-2xl text-center max-w-md w-full"
      >
        <h2
          id="phase-selection-title"
          class="text-2xl md:text-3xl font-bold mb-6"
        >
          Selecione o N√≠vel
        </h2>
        <div
          id="phase-selection-buttons"
          class="grid grid-cols-3 gap-4 mb-6"
        ></div>
        <button
          onclick="closePhaseSelectionModal()"
          class="bg-stone-200 text-stone-700 font-bold py-2 px-6 rounded-lg hover:bg-stone-300 transition"
        >
          Voltar
        </button>
      </div>
    </div>

    <div
      id="phase-end-modal"
      class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"
    >
      <div
        class="bg-white p-8 rounded-2xl shadow-2xl text-center max-w-sm w-full"
      >
        <h2 id="modal-title" class="text-2xl md:text-3xl font-bold mb-2"></h2>
        <p
          id="modal-score"
          class="text-base md:text-lg text-stone-600 mb-1"
        ></p>
        <p
          id="modal-bonus"
          class="text-base md:text-lg text-amber-500 font-bold mb-6"
        ></p>
        <div class="flex flex-col sm:flex-row gap-4">
          <button
            id="modal-next-phase"
            class="flex-1 bg-[#386ccc] text-white font-bold py-3 rounded-lg hover:bg-[#2a529f] transition"
          >
            Pr√≥xima Fase
          </button>
          <button
            onclick="goToGameSelection()"
            class="flex-1 bg-stone-200 text-stone-700 font-bold py-3 rounded-lg hover:bg-stone-300 transition"
          >
            Mudar de Jogo
          </button>
        </div>
      </div>
    </div>

    <!-- Modal de Jogo Pausado -->
    <div
      id="game-paused-modal"
      class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4"
      style="z-index: 150"
    >
      <div
        class="bg-white p-8 rounded-2xl shadow-2xl text-center max-w-md w-full"
      >
        <h2 class="text-3xl md:text-4xl font-bold mb-4 text-[#386ccc]">
          ‚è∏Ô∏è Jogo Pausado
        </h2>
        <p class="text-lg text-stone-600 mb-6">
          Seu progresso foi salvo. O que deseja fazer?
        </p>
        <div class="flex flex-col gap-3">
          <button
            id="resume-game-btn"
            class="w-full bg-green-500 text-white font-bold py-3 rounded-lg hover:bg-green-600 transition"
          >
            Continuar Jogando
          </button>
          <button
            id="restart-phase-btn"
            class="w-full bg-red-500 text-white font-bold py-3 rounded-lg hover:bg-red-600 transition"
          >
            Reiniciar Fase
          </button>
          <button
            id="exit-to-menu-btn"
            class="w-full bg-amber-500 text-white font-bold py-3 rounded-lg hover:bg-amber-600 transition"
          >
            Sair para Menu
          </button>
        </div>
      </div>
    </div>

    <div
      id="session-expired-modal"
      class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[9999]"
    >
      <div
        class="bg-white p-8 rounded-2xl shadow-2xl text-center max-w-sm w-full z-[10000]"
      >
        <h2 class="text-2xl md:text-3xl font-bold mb-2 text-amber-600">
          Sess√£o Expirada!
        </h2>
        <p class="text-base md:text-lg text-stone-600 mb-6">
          Seu tempo acabou. Para continuar jogando, por favor, fa√ßa o login
          novamente.
        </p>
        <button
          onclick="goBackToLogin(true)"
          class="w-full bg-[#386ccc] text-white font-bold py-3 rounded-lg hover:bg-[#2a529f] transition"
        >
          OK
        </button>
      </div>
    </div>
  </body>
</html>
